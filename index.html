<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example</title>
</head>

<body>

    <h1>Testing 13</h1>


    <button id="Print"> Test Button </button>
</body>


<script>
    var jwt = localStorage.getItem('jwt');

    window.sendToFlutter = (message) => {
        Print.postMessage('f1' + typeof flutterChannel);

        if (flutterChannel) {
            // Print.postMessage('ejecuntando 2');

            flutterChannel.postMessage(message);
        }
    }

    //flutterChannel.postMessage('message1');
    sendToFlutter('prueba 1');
    window.sendToFlutter(jwt);

    window.sendToFlutter('prueba 2');

    //asdas;
    var printBtn = document.getElementById('Print');
    console.log('Testing...');
    printBtn.addEventListener('click', function () {
        // get jwt from localStorage
        var jwt = localStorage.getItem('jwt');
        // send jwt to server
        console.log(jwt)
        flutterChannel.postMessage('message2');
        sendToFlutter('prueba 3');
        window.sendToFlutter('prueba 4');
        flutterChannel.postMessage('prueba');

        Print.postMessage('jwt es ' + jwt);
    });

    var holaMundo = (val) => {
        alert('hola ' + val)
        localStorage.setItem('jwt', val);
    }


</script>

</html>